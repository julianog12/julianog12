class GerarArquivo
	require 'open3'
	require '/home/user1/search/lib/canivete.rb'

	def initialize(caminho_config)
		@caminho 							= caminho_config
		@arq_yml               	= YAML::load(File.open(@caminho))

 		@cd_empresa          	= @arq_yml["ambiente"]["empresa"]

		@nm_arquivo 		= "#{Rails.root}/lib/arquivos_gerados/" + @arq_yml["geral"]["nome_arq_result"] + "_#{Time.now.strftime('%d%m%Y%H%M%S')}"
		@nm_arquivos_importados = "#{Rails.root}/lib/arquivos_gerados/" + "#{@cd_empresa}_importados"  + "_#{Time.now.strftime('%d_%m_%Y_%H_%M_%S')}" 

		begin
		   File.delete("#{Rails.root}/lib/arquivos_gerados/" + "#{@cd_empresa}_importados_*")
 		rescue
		   nil
		end

		@extensao_arquivo    	= (@arq_yml["ambiente"]["extensao_leitura"] == "all" ? "*" : @arq_yml["ambiente"]["extensao_leitura"])
		@servidor_funcao     	= @arq_yml["geral"]["servidor_http_funcao"]
		@servidor_http       	= @arq_yml["geral"]["servidor_http"]
		@diretorio_listener  	= @arq_yml["ambiente"]["diretorio_listener"]
		@ultimo_diretorio       = @arq_yml["geral"]["ultimo_diretorio"] 

		@data_ultima_alteracao= ler_arquivo_ultima_alteracao(@arq_yml["geral"]["ultima_alteracao"].split(" "))

		gerar_arquivo
			
		processar
	
		File.delete(@nm_arquivo)

		gravar_arquivo_ultima_alteracao

	end


	def ler_arquivo_ultima_alteracao(data)
		return Time.new(data[0], data[1], data[2], data[3], data[4], data[5])
	end

	def gravar_arquivo_ultima_alteracao
		data  		= Time.now.strftime("%Y %m %d %H %M %S").to_s
		@arq_yml["geral"]["ultima_alteracao"] = data
		File.open(@caminho, "w") {|f| f.write @arq_yml.to_yaml}
	end


	def gerar_arquivo
                f 		= nil
        	if @extensao_arquivo == "*"
  		   f 		= open("| ls -lt --time-style='+%d%m%Y %H%M' #{@diretorio_listener}/")
                else
   		   f 		= open("| ls -lt --time-style='+%d%m%Y %H%M' #{@diretorio_listener}/*.#{@extensao_arquivo}")
                end
		a 		= File.new(@nm_arquivo, "w")
		a.write f.read
		a.close

		@arq_importados = File.new(@nm_arquivos_importados, "w")
		

	end

	def post_funcao(vComponente, vCmd)
		vComando     = vCmd.map { |i| i.to_s }.join("\n")
		vComando     = vComando.force_encoding("UTF-8")
		vTipo        = vCmd[0][0..(vCmd[0].index(/\s/)-1)].to_s
		if vTipo.match(/entry/i)
			 vTipo     = "Local Proc"
		elsif vTipo.match(/operation/i)
			 vTipo     = "Operation"
		else
			 vTipo     = ""
		end
		if (!vTipo.nil? && !vTipo.empty?)

                    login as: user1
user1@172.17.80.101's password:
Welcome to Ubuntu 18.04.1 LTS (GNU/Linux 4.15.0-42-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

 * 'snap info' now shows the freshness of each channel.
   Try 'snap info microk8s' for all the latest goodness.


 * Canonical Livepatch is available for installation.
   - Reduce system reboots and improve kernel security. Activate at:
     https://ubuntu.com/livepatch

2 packages can be updated.
0 updates are security updates.


Last login: Thu Feb 21 13:50:55 2019 from 172.17.79.33
user1@unifaceutility:~$ cd search/
RVM used your Gemfile for selecting Ruby, it is all fine - Heroku does that too,
you can ignore these warnings with 'rvm rvmrc warning ignore /home/user1/search/Gemfile'.
To ignore the warning for all files run 'rvm rvmrc warning ignore allGemfiles'.

user1@unifaceutility:~/search$ bundle exec rails c -e production
Running via Spring preloader in process 6569
Loading production environment (Rails 5.2.1)
2.5.1 :001 > funcoes =  Funcao.where('tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)
2.5.1 :002'> ^C
2.5.1 :002 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'GPRDO002', 2)
  Funcao Load (1.3ms)  SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'GPRDO002' and cd_empresa = 2) LIMIT $1  [["LIMIT", 11]]
Traceback (most recent call last):
ActiveRecord::StatementInvalid (PG::UndefinedFunction: ERROR:  operator does not exist: character varying = integer)
LINE 1: ...oc' and cd_componente = 'GPRDO002' and cd_empresa = 2) LIMIT...
                                                             ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'GPRDO002' and cd_empresa = 2) LIMIT $1
2.5.1 :003 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'GPRDO002', '2')
  Funcao Load (1.3ms)  SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'GPRDO002' and cd_empresa = '2') LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :004 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'gprdo002', '2')
  Funcao Load (24.8ms)  SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '2') LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, ...]>
2.5.1 :005 > funcoes.each do |func|
2.5.1 :006 >     puts func.nome
2.5.1 :007?>   end
  Funcao Load (11.5ms)  SELECT "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '2')
Traceback (most recent call last):
        2: from (irb):5
        1: from (irb):6:in `block in irb_binding'
NoMethodError (undefined method `nome' for #<Funcao:0x0000556a35fdddc0>)
2.5.1 :008 > Funcao.column_names
 => ["id", "nm_funcao", "cd_componente", "tipo", "codigo", "cd_empresa", "created_at", "updated_at"]
2.5.1 :009 > funcoes.each do |func|
2.5.1 :010 >     puts func.nm_funcao
2.5.1 :011?>   end
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :012 > Funcao.column_names
 => ["id", "nm_funcao", "cd_componente", "tipo", "codigo", "cd_empresa", "created_at", "updated_at"]
2.5.1 :013 > puts func.nm_funcao
Traceback (most recent call last):
        1: from (irb):13
NameError (undefined local variable or method `func' for main:Object)
Did you mean?  funcoes
2.5.1 :014 > end
Traceback (most recent call last):
SyntaxError ((irb):14: syntax error, unexpected keyword_end)
2.5.1 :015 > funcoes.each do |func|
2.5.1 :016 >     puts func.nm_funcao
2.5.1 :017?>   end; nil
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :018 > funcoes.uniq
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :019 > funcoes.each do |func|
2.5.1 :020 >     puts func.nm_funcao
2.5.1 :021?>   end; nil
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :022 > funcoes.uniq! {|c| [c[0], c[1]]}
Traceback (most recent call last):
        1: from (irb):22
NoMethodError (undefined method `uniq!' for #<Funcao::ActiveRecord_Relation:0x00007f3a201435f0>)
Did you mean?  uniq
2.5.1 :023 > funcoes.uniq
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :024 > funcoes.uniq!
Traceback (most recent call last):
        1: from (irb):24
NoMethodError (undefined method `uniq!' for #<Funcao::ActiveRecord_Relation:0x00007f3a201435f0>)
Did you mean?  uniq
2.5.1 :025 > funcoes & funcoes
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :026 > funcoes
 => #<ActiveRecord::Relation [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, ...]>
2.5.1 :027 > funcoes.each do |func|
2.5.1 :028 >     puts func.nm_funcao
2.5.1 :029?>   end; nil
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :030 > funcoes = (funcoes.map { |n| n if n[0] != n[1]}).compact
 => []
2.5.1 :031 > funcoes
 => []
2.5.1 :032 > funcoes =  Funcao.where('tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)
2.5.1 :033'> funcoes.each do |func|^C
2.5.1 :033 > funcoes =  Funcao.where('tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)^C
2.5.1 :033 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'gprdo002', '2')
  Funcao Load (1.1ms)  SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '2') LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, ...]>
2.5.1 :034 > funcoes.class
 => Funcao::ActiveRecord_Relation
2.5.1 :035 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'gprdo002', '2').uniq
  Funcao Load (1.5ms)  SELECT "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '2')
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :036 > funcoes.each do |func|
2.5.1 :037 >     puts func.nm_funcao
2.5.1 :038?>   end; nil
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :039 > funcoes.class
 => Array
2.5.1 :040 > funcoes.first
 => #<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">
2.5.1 :041 > funcoes.uniq
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :042 > funcoes.class
 => Array
2.5.1 :043 > funcoes.each do |func|
2.5.1 :044 >     puts func.nm_funcao
2.5.1 :045?>   end; nil
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :046 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a[0]] += a[1]}.to_a
Traceback (most recent call last):
        5: from (irb):46
        4: from (irb):46:in `each_with_object'
        3: from (irb):46:in `each'
        2: from (irb):46:in `block in irb_binding'
        1: from (irb):46:in `+'
TypeError (nil can't be coerced into Integer)
2.5.1 :047 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a.nm_funcao] += a[1].nm_funcao}.to_a
Traceback (most recent call last):
        4: from (irb):47
        3: from (irb):47:in `each_with_object'
        2: from (irb):47:in `each'
        1: from (irb):47:in `block in irb_binding'
NoMethodError (undefined method `nm_funcao' for nil:NilClass)
2.5.1 :048 > funcoes
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :049 > funcoes.count
 => 30
2.5.1 :050 > funcoes.class
 => Array
2.5.1 :051 > funcoes.first
 => #<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">
2.5.1 :052 > funcoes[0]
 => #<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">
2.5.1 :053 > funcoes[0][1]
 => nil
2.5.1 :054 > funcoes[0]["nm_funcao"]
 => "pl_ctx_erro"
2.5.1 :055 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a["nm_funcao"]] += a[1]}.to_a
Traceback (most recent call last):
        5: from (irb):55
        4: from (irb):55:in `each_with_object'
        3: from (irb):55:in `each'
        2: from (irb):55:in `block in irb_binding'
        1: from (irb):55:in `+'
TypeError (nil can't be coerced into Integer)
2.5.1 :056 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a["nm_funcao"]] += a["nm_funcao"]}.to_a
Traceback (most recent call last):
        5: from (irb):56
        4: from (irb):56:in `each_with_object'
        3: from (irb):56:in `each'
        2: from (irb):56:in `block in irb_binding'
        1: from (irb):56:in `+'
TypeError (String can't be coerced into Integer)
2.5.1 :057 > f = funcoes.map{|x| [x["nm_funcao"], x["nm_funcao"].uniq]}
Traceback (most recent call last):
        3: from (irb):57
        2: from (irb):57:in `map'
        1: from (irb):57:in `block in irb_binding'
NoMethodError (undefined method `uniq' for "pl_ctx_erro":String)
2.5.1 :058 > f = funcoes.map{|x| [x["nm_funcao"], x["nm_funcao"]].uniq}
 => [["pl_ctx_erro"], ["pl_ctx_erro\r"], ["pl_erro_cmdmsg"], ["pl_erro_cmdmsg\r"], ["pl_erro_comando"], ["pl_erro_comando\r"], ["pl_erro_store"], ["pl_erro_store\r"], ["pl_erro_trgmsg"], ["pl_erro_trgmsg\r"], ["pl_erro_trigger"], ["pl_erro_trigger\r"], ["pl_errtrig_store"], ["pl_errtrig_store\r"], ["pl_msg_erro"], ["pl_msg_erro\r"], ["pl_preco_dia"], ["pl_preco_dia\r"], ["pl_preco_farelo"], ["pl_preco_farelo\r"], ["pl_preco_milho"], ["pl_preco_milho\r"], ["pl_preco_semente"], ["pl_preco_semente\r"], ["pl_preco_suino"], ["pl_preco_suino\r"], ["pl_tribut_produ"], ["pl_tribut_produ\r"], ["pl_valida_const"], ["pl_valida_const\r"]]
2.5.1 :059 > f
 => [["pl_ctx_erro"], ["pl_ctx_erro\r"], ["pl_erro_cmdmsg"], ["pl_erro_cmdmsg\r"], ["pl_erro_comando"], ["pl_erro_comando\r"], ["pl_erro_store"], ["pl_erro_store\r"], ["pl_erro_trgmsg"], ["pl_erro_trgmsg\r"], ["pl_erro_trigger"], ["pl_erro_trigger\r"], ["pl_errtrig_store"], ["pl_errtrig_store\r"], ["pl_msg_erro"], ["pl_msg_erro\r"], ["pl_preco_dia"], ["pl_preco_dia\r"], ["pl_preco_farelo"], ["pl_preco_farelo\r"], ["pl_preco_milho"], ["pl_preco_milho\r"], ["pl_preco_semente"], ["pl_preco_semente\r"], ["pl_preco_suino"], ["pl_preco_suino\r"], ["pl_tribut_produ"], ["pl_tribut_produ\r"], ["pl_valida_const"], ["pl_valida_const\r"]]
2.5.1 :060 > f.class
 => Array
2.5.1 :061 > funcoes
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :062 > funcoes.each{|ar| ar.second.uniq!}
Traceback (most recent call last):
        3: from (irb):62
        2: from (irb):62:in `each'
        1: from (irb):62:in `block in irb_binding'
NoMethodError (undefined method `second' for #<Funcao:0x0000556a363104e8>)
Did you mean?  send
2.5.1 :063 > funcoes.each{|ar| ar.second.uniq!}
Traceback (most recent call last):
        3: from (irb):63
        2: from (irb):63:in `each'
        1: from (irb):63:in `block in irb_binding'
NoMethodError (undefined method `second' for #<Funcao:0x0000556a363104e8>)
Did you mean?  send
2.5.1 :064 > i = 0
 => 0
2.5.1 :065 > while i < funcoes.length
2.5.1 :066?>       funcoes[i]["nm_funcao"] = funncoes[i]["nm_funcao"].uniq
2.5.1 :067?>       i += 1
2.5.1 :068?>   end
Traceback (most recent call last):
        1: from (irb):66
NameError (undefined local variable or method `funncoes' for main:Object)
Did you mean?  funcoes
2.5.1 :069 > i = 0
 => 0
2.5.1 :070 > while i < funcoes.length
2.5.1 :071?>       funcoes[i]["nm_funcao"] = funcoes[i]["nm_funcao"].uniq
2.5.1 :072?>       i += 1
2.5.1 :073?>   end
Traceback (most recent call last):
        1: from (irb):71
NoMethodError (undefined method `uniq' for "pl_ctx_erro":String)
2.5.1 :074 > i = 0
 => 0
2.5.1 :075 > while i < funcoes.length
2.5.1 :076?>       funcoes[i]["nm_funcao"] = funcoes[i]["nm_funcao"]
2.5.1 :077?>       i += 1
2.5.1 :078?>   end
 => nil
2.5.1 :079 > funcoes
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :080 > funcoes.class
 => Array
2.5.1 :081 > funcoes.last
 => #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">
2.5.1 :082 > funcoes.last.nm_funcao
 => "pl_valida_const\r"
2.5.1 :083 >  a = [1, 2, 3, 9, 9]
 => [1, 2, 3, 9, 9]
2.5.1 :084 >   b = [1, 2, 4, 1, 1]
 => [1, 2, 4, 1, 1]
2.5.1 :085 >  c = a <=> b
 => -1
2.5.1 :086 > c
 => -1
2.5.1 :087 > funcoes.each_with_object
Traceback (most recent call last):
        2: from (irb):87
        1: from (irb):87:in `each_with_object'
ArgumentError (wrong number of arguments (given 0, expected 1))
2.5.1 :088 > funcoes.each_with_object(Hash.new(0))
 => #<Enumerator: [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]:each_with_object({})>
2.5.1 :089 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a[0]] += a[1]}.to_a
Traceback (most recent call last):
        5: from (irb):89
        4: from (irb):89:in `each_with_object'
        3: from (irb):89:in `each'
        2: from (irb):89:in `block in irb_binding'
        1: from (irb):89:in `+'
TypeError (nil can't be coerced into Integer)
2.5.1 :090 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a[0].nm_funcao]] += a[1].nm_funcao}.to_a
Traceback (most recent call last):
SyntaxError ((irb):90: syntax error, unexpected ']', expecting '}')
...(0)) {|a, h| h[a[0].nm_funcao]] += a[1].nm_funcao}.to_a
...                              ^
(irb):90: syntax error, unexpected '}', expecting end-of-input
....nm_funcao]] += a[1].nm_funcao}.to_a
...                              ^
2.5.1 :091 > funcoes.each_with_object(Hash.new(0)) {|a, h| h[a[0].nm_funcao] += a[1].nm_funcao}.to_a
Traceback (most recent call last):
        4: from (irb):91
        3: from (irb):91:in `each_with_object'
        2: from (irb):91:in `each'
        1: from (irb):91:in `block in irb_binding'
NoMethodError (undefined method `nm_funcao' for nil:NilClass)
2.5.1 :092 > funcoes.uniq{ |s| s.values_at(:nm_funcao)}
Traceback (most recent call last):
        3: from (irb):92
        2: from (irb):92:in `uniq'
        1: from (irb):92:in `block in irb_binding'
NoMethodError (undefined method `values_at' for #<Funcao:0x0000556a363104e8>)
2.5.1 :093 > funcoes.uniq{ |s| puts s}
#<Funcao:0x0000556a363104e8>
#<Funcao:0x0000556a363103a8>
#<Funcao:0x0000556a36310268>
#<Funcao:0x0000556a36310128>
#<Funcao:0x0000556a35023fb0>
#<Funcao:0x0000556a35023970>
#<Funcao:0x0000556a35023740>
#<Funcao:0x0000556a35023420>
#<Funcao:0x0000556a35022f70>
#<Funcao:0x0000556a350225c0>
#<Funcao:0x0000556a350221d8>
#<Funcao:0x0000556a35021760>
#<Funcao:0x0000556a35020ab8>
#<Funcao:0x0000556a35020658>
#<Funcao:0x0000556a3641ffa0>
#<Funcao:0x0000556a3641fe60>
#<Funcao:0x0000556a3641fd20>
#<Funcao:0x0000556a3641fbe0>
#<Funcao:0x0000556a3641faa0>
#<Funcao:0x0000556a3641f960>
#<Funcao:0x0000556a3641f820>
#<Funcao:0x0000556a3641f6e0>
#<Funcao:0x0000556a3641f5a0>
#<Funcao:0x0000556a3641f460>
#<Funcao:0x0000556a3641f320>
#<Funcao:0x0000556a3641f1e0>
#<Funcao:0x0000556a3641f0a0>
#<Funcao:0x0000556a3641ef60>
#<Funcao:0x0000556a3641ee20>
#<Funcao:0x0000556a3641ece0>
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">]
2.5.1 :094 > results = funcoes.uniq
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :095 > results
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :096 > results.count
 => 30
2.5.1 :097 > results = funcoes.uniq do |hash|
2.5.1 :098 >       [hash]
2.5.1 :099?>   end
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :100 > results
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :101 > results.count
 => 30
2.5.1 :102 > funcoes.inject([]) {|result, h| result << h unless result.unclude?(h); result}
Traceback (most recent call last):
        4: from (irb):102
        3: from (irb):102:in `inject'
        2: from (irb):102:in `each'
        1: from (irb):102:in `block in irb_binding'
NoMethodError (undefined method `unclude?' for []:Array)
Did you mean?  include?
2.5.1 :103 > funcoes.inject([]) {|result, h| result << h unless result.include?(h); result}
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :104 > result = funcoes.inject([]) {|result, h| result << h unless result.include?(h); result}
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :105 > result.class
 => Array
2.5.1 :106 > result.count
 => 30
2.5.1 :107 > result = funcoes.inject([]) {|result, h| result << h unless result.nm_funcao.include?(h); result}
Traceback (most recent call last):
        4: from (irb):107
        3: from (irb):107:in `inject'
        2: from (irb):107:in `each'
        1: from (irb):107:in `block in irb_binding'
NoMethodError (undefined method `nm_funcao' for []:Array)
2.5.1 :108 > result = funcoes.inject([]) {|result, h| result << h unless result["nm_funcao"].include?(h); result}
Traceback (most recent call last):
        5: from (irb):108
        4: from (irb):108:in `inject'
        3: from (irb):108:in `each'
        2: from (irb):108:in `block in irb_binding'
        1: from (irb):108:in `[]'
TypeError (no implicit conversion of String into Integer)
2.5.1 :109 > result = funcoes.inject([]) {|result, h| result << h unless result.include?(h["nm_funcao"]); result}
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :110 > result.count
 => 30
2.5.1 :111 > result
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :112 > result = funcoes.inject([]) {|result, h| puts h}
#<Funcao:0x0000556a363104e8>
#<Funcao:0x0000556a363103a8>
#<Funcao:0x0000556a36310268>
#<Funcao:0x0000556a36310128>
#<Funcao:0x0000556a35023fb0>
#<Funcao:0x0000556a35023970>
#<Funcao:0x0000556a35023740>
#<Funcao:0x0000556a35023420>
#<Funcao:0x0000556a35022f70>
#<Funcao:0x0000556a350225c0>
#<Funcao:0x0000556a350221d8>
#<Funcao:0x0000556a35021760>
#<Funcao:0x0000556a35020ab8>
#<Funcao:0x0000556a35020658>
#<Funcao:0x0000556a3641ffa0>
#<Funcao:0x0000556a3641fe60>
#<Funcao:0x0000556a3641fd20>
#<Funcao:0x0000556a3641fbe0>
#<Funcao:0x0000556a3641faa0>
#<Funcao:0x0000556a3641f960>
#<Funcao:0x0000556a3641f820>
#<Funcao:0x0000556a3641f6e0>
#<Funcao:0x0000556a3641f5a0>
#<Funcao:0x0000556a3641f460>
#<Funcao:0x0000556a3641f320>
#<Funcao:0x0000556a3641f1e0>
#<Funcao:0x0000556a3641f0a0>
#<Funcao:0x0000556a3641ef60>
#<Funcao:0x0000556a3641ee20>
#<Funcao:0x0000556a3641ece0>
 => nil
2.5.1 :113 > result = funcoes.inject([]) {|result, h| puts h.nm_funcao}
pl_ctx_erro
pl_ctx_erro
pl_erro_cmdmsg
pl_erro_cmdmsg
pl_erro_comando
pl_erro_comando
pl_erro_store
pl_erro_store
pl_erro_trgmsg
pl_erro_trgmsg
pl_erro_trigger
pl_erro_trigger
pl_errtrig_store
pl_errtrig_store
pl_msg_erro
pl_msg_erro
pl_preco_dia
pl_preco_dia
pl_preco_farelo
pl_preco_farelo
pl_preco_milho
pl_preco_milho
pl_preco_semente
pl_preco_semente
pl_preco_suino
pl_preco_suino
pl_tribut_produ
pl_tribut_produ
pl_valida_const
pl_valida_const
 => nil
2.5.1 :114 > result = funcoes.inject([]) {|result, h| result << h unless result.include?(h.nm_funcao); result}
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :115 > result.count
 => 30
2.5.1 :116 > result = funcoes.inject([]) {|result, h| result << h unless result.include?(h.nm_funcao); result}
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :117 > result.count
 => 30
2.5.1 :118 > result.uniq
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :119 > funcoes =  Funcao.where('tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)
2.5.1 :120'> Funcao.column_names
2.5.1 :121'> ^C
2.5.1 :121 > Funcao.column_names
 => ["id", "nm_funcao", "cd_componente", "tipo", "codigo", "cd_empresa", "created_at", "updated_at"]
2.5.1 :122 > funcoes = Funcao.group_by([:nm_funcao, :cd_componente, :cd_empresa])
Traceback (most recent call last):
        1: from (irb):122
NoMethodError (undefined method `group_by' for #<Class:0x0000556a350b2aa8>)
Did you mean?  group
2.5.1 :123 > funcoes = Funcao.group([:nm_funcao, :cd_componente, :cd_empresa])
Traceback (most recent call last):
ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  column "funcaos.id" must appear in the GROUP BY clause or be used in an aggregate function)
LINE 1: SELECT  "funcaos".* FROM "funcaos" GROUP BY "funcaos"."nm_fu...
                ^
: SELECT  "funcaos".* FROM "funcaos" GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1
2.5.1 :124 > funcoes = Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa")
^C  Funcao Load (6752.4ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
Traceback (most recent call last):
IRB::Abort (abort then interrupt!)
2.5.1 :125 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).where('tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)
2.5.1 :126'> ^C
2.5.1 :126 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).where("tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2', "Local Proc", v_componente, v_cd_empresa)
2.5.1 :127"> "
2.5.1 :128?>   ^C
2.5.1 :128 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).where("tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2'", "Local Proc", v_componente, v_cd_empresa)
Traceback (most recent call last):
        1: from (irb):128
NameError (undefined local variable or method `v_componente' for main:Object)
2.5.1 :129 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).where("tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2'", "Local Proc", v_componente, v_cd_empresa)
Traceback (most recent call last):
        1: from (irb):129
NameError (undefined local variable or method `v_componente' for main:Object)
2.5.1 :130 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).where("tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2'", "Local Proc", "gpro002", "1")       Funcao Load (0.8ms)  SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
Traceback (most recent call last):
ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  column "funcaos.id" must appear in the GROUP BY clause or be used in an aggregate function)
LINE 1: SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'LocaProc' ...
                ^
: SELECT  "funcaos".* FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1
2.5.1 :131 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2'", "Local Proc", "gpro002", "1")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'GPRDO002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :132 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'GPRO002' and cd_empresa = '2'", "Local Proc", "gpro002", "1")
  Funcao Load (0.8ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'GPRO002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :133 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gpro002' and cd_empresa = '2'", "Local Proc", "gpro002", "1")
  Funcao Load (0.7ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gpro002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :134 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '2'", "Local Proc", "gpro002", "1")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :135 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = ?", "Local Proc", "gpro002", "1")
Traceback (most recent call last):
        1: from (irb):135
ActiveRecord::PreparedStatementInvalid (wrong number of bind variables (3 for 1) in: tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = ?)
2.5.1 :136 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '1'")
  Funcao Load (1.1ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :137 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '1'")
  Funcao Load (0.8ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :138 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '2'")
  Funcao Load (0.8ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002' and cd_empresa = '2') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :139 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002'")
  Funcao Load (1.0ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :140 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'GPRDO002'")
  Funcao Load (0.7ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'GPRDO002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :141 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'LocaProc' and cd_componente = 'gprdo002'")
  Funcao Load (1.0ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'LocaProc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :142 > Funcao.first
  Funcao Load (5.5ms)  SELECT  "funcaos".* FROM "funcaos" ORDER BY "funcaos"."id" ASC LIMIT $1  [["LIMIT", 1]]
 => #<Funcao id: 1, nm_funcao: "pl_valida_const", cd_componente: "aagcf001", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 12:10:15", updated_at: "2018-12-17 12:10:15">
2.5.1 :143 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'Loca Proc' and cd_componente = 'gprdo002'")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Loca Proc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation []>
2.5.1 :144 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'Local Proc' and cd_componente = 'gprdo002'")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "2">, ...]>
2.5.1 :145 > funcoes.count
   (1.9ms)  SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_nm_funcao_cd_componente_cd_empresa, "funcaos"."nm_funcao" AS funcaos_nm_funcao, "funcaos"."cd_componente" AS funcaos_cd_componente, "funcaos"."cd_empresa" AS funcaos_cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa"
Traceback (most recent call last):
        1: from (irb):145
ActiveRecord::StatementInvalid (PG::UndefinedFunction: ERROR:  function count(character varying, character varying, character varying) does not exist)
LINE 1: SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_...
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_nm_funcao_cd_componente_cd_empresa, "funcaos"."nm_funcao" AS funcaos_nm_funcao, "funcaos"."cd_componente" AS funcaos_cd_componente, "funcaos"."cd_empresa" AS funcaos_cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa"
2.5.1 :146 > funcoes
  Funcao Load (1.1ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "2">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "2">, ...]>
2.5.1 :147 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1'")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", cd_empresa: "1">, ...]>
2.5.1 :148 > funcoes.class
 => Funcao::ActiveRecord_Relation
2.5.1 :149 > funcoes.length
  Funcao Load (0.9ms)  SELECT nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa"
 => 30
2.5.1 :150 > Funcao.first
  Funcao Load (0.6ms)  SELECT  "funcaos".* FROM "funcaos" ORDER BY "funcaos"."id" ASC LIMIT $1  [["LIMIT", 1]]
 => #<Funcao id: 1, nm_funcao: "pl_valida_const", cd_componente: "aagcf001", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 12:10:15", updated_at: "2018-12-17 12:10:15">
2.5.1 :151 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1'")
  Funcao Load (0.9ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", cd_empresa: "1">, ...]>
2.5.1 :152 > funcoes = nil
 => nil
2.5.1 :153 > funcoes =  Funcao.group([:nm_funcao, :cd_componente, :cd_empresa]).select("nm_funcao, cd_componente, cd_empresa").where("tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1'")
  Funcao Load (0.8ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" LIMIT $1  [["LIMIT", 11]]
 => #<ActiveRecord::Relation [#<Funcao id: nil, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_sql\r", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", cd_empresa: "1">, #<Funcao id: nil, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", cd_empresa: "1">, ...]>
2.5.1 :154 > funcoes.count
   (0.9ms)  SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_nm_funcao_cd_componente_cd_empresa, "funcaos"."nm_funcao" AS funcaos_nm_funcao, "funcaos"."cd_componente" AS funcaos_cd_componente, "funcaos"."cd_empresa" AS funcaos_cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa"
Traceback (most recent call last):
        1: from (irb):154
ActiveRecord::StatementInvalid (PG::UndefinedFunction: ERROR:  function count(character varying, character varying, character varying) does not exist)
LINE 1: SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_...
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
: SELECT COUNT(nm_funcao, cd_componente, cd_empresa) AS count_nm_funcao_cd_componente_cd_empresa, "funcaos"."nm_funcao" AS funcaos_nm_funcao, "funcaos"."cd_componente" AS funcaos_cd_componente, "funcaos"."cd_empresa" AS funcaos_cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa"
2.5.1 :155 > funcoes.first
  Funcao Load (0.8ms)  SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" ORDER BY "funcaos"."id" ASC LIMIT $1  [["LIMIT", 1]]
Traceback (most recent call last):
        1: from (irb):155
ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  column "funcaos.id" must appear in the GROUP BY clause or be used in an aggregate function)
LINE 1: ...."cd_componente", "funcaos"."cd_empresa" ORDER BY "funcaos"....
                                                             ^
: SELECT  nm_funcao, cd_componente, cd_empresa FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '1') GROUP BY "funcaos"."nm_funcao", "funcaos"."cd_componente", "funcaos"."cd_empresa" ORDER BY "funcaos"."id" ASC LIMIT $1
2.5.1 :156 > funcoes =  Funcao.where('tipo = ? and cd_componente = ? and cd_empresa = ?', "Local Proc", 'gprdo002', '2').uniq
  Funcao Load (1.6ms)  SELECT "funcaos".* FROM "funcaos" WHERE (tipo = 'Local Proc' and cd_componente = 'gprdo002' and cd_empresa = '2')
 => [#<Funcao id: 195420, nm_funcao: "pl_ctx_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515041, nm_funcao: "pl_ctx_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_ctx_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195417, nm_funcao: "pl_erro_cmdmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\n      params\n         $t_ls_p...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515038, nm_funcao: "pl_erro_cmdmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_CMDMSG\r\n      params\r\n         $t_ls...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195416, nm_funcao: "pl_erro_comando", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\n      params\n         $t_ls_...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515037, nm_funcao: "pl_erro_comando\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_COMANDO\r\n      params\r\n         $t_l...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195418, nm_funcao: "pl_erro_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\nparams\n   $t_ls_proccon$   :IN...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515039, nm_funcao: "pl_erro_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_STORE\r\nparams\r\n   $t_ls_proccon$   :...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195414, nm_funcao: "pl_erro_trgmsg", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\n      activate \"GSISO001\".TRA...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515035, nm_funcao: "pl_erro_trgmsg\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRGMSG\r\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195413, nm_funcao: "pl_erro_trigger", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\n      activate \"GSISO001\".TR...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515034, nm_funcao: "pl_erro_trigger\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRO_TRIGGER\r\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195415, nm_funcao: "pl_errtrig_store", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\n      activate \"GSISO001\".T...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515036, nm_funcao: "pl_errtrig_store\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_ERRTRIG_STORE\r\n      activate \"GSISO001\"....", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195419, nm_funcao: "pl_msg_erro", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\n\t;******************************...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515040, nm_funcao: "pl_msg_erro\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry pl_msg_erro\r\n\t;*****************************...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195424, nm_funcao: "pl_preco_dia", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\n;-----------------\nparams\n   nu...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515045, nm_funcao: "pl_preco_dia\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_DIA\r\n;-----------------\r\nparams\r\n  ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195426, nm_funcao: "pl_preco_farelo", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:21", updated_at: "2018-12-17 15:39:21">, #<Funcao id: 1515047, nm_funcao: "pl_preco_farelo\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_FARELO\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195422, nm_funcao: "pl_preco_milho", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\n;-------------------\n; Altera...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515043, nm_funcao: "pl_preco_milho\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_MILHO\r\n;-------------------\r\n; Alte...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195423, nm_funcao: "pl_preco_semente", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\n;---------------------\n; **...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515044, nm_funcao: "pl_preco_semente\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SEMENTE\r\n;---------------------\r\n; ...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195421, nm_funcao: "pl_preco_suino", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\n;-------------------\nparams\n ...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515042, nm_funcao: "pl_preco_suino\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_PRECO_SUINO\r\n;-------------------\r\nparams...", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">, #<Funcao id: 195425, nm_funcao: "pl_tribut_produ", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\n;--------------------\n; Auto...", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515046, nm_funcao: "pl_tribut_produ\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_TRIBUT_PRODU\r\n;--------------------\r\n; Au...", cd_empresa: "2", created_at: "2019-02-20 22:26:50", updated_at: "2019-02-20 22:26:50">, #<Funcao id: 195412, nm_funcao: "pl_valida_const", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\nend", cd_empresa: "2", created_at: "2018-12-17 15:39:20", updated_at: "2018-12-17 15:39:20">, #<Funcao id: 1515033, nm_funcao: "pl_valida_const\r", cd_componente: "gprdo002", tipo: "Local Proc", codigo: "entry PL_VALIDA_CONST\r\nend\r", cd_empresa: "2", created_at: "2019-02-20 22:26:49", updated_at: "2019-02-20 22:26:49">]
2.5.1 :157 > funcoes.each do |func|
2.5.1 :158 >     puts "#{func.cd_empresa} - #{func.nm_funcao}"
2.5.1 :159?>   end; nil
2 - pl_ctx_erro
2 - pl_ctx_erro
2 - pl_erro_cmdmsg
2 - pl_erro_cmdmsg
2 - pl_erro_comando
2 - pl_erro_comando
2 - pl_erro_store
2 - pl_erro_store
2 - pl_erro_trgmsg
2 - pl_erro_trgmsg
2 - pl_erro_trigger
2 - pl_erro_trigger
2 - pl_errtrig_store
2 - pl_errtrig_store
2 - pl_msg_erro
2 - pl_msg_erro
2 - pl_preco_dia
2 - pl_preco_dia
2 - pl_preco_farelo
2 - pl_preco_farelo
2 - pl_preco_milho
2 - pl_preco_milho
2 - pl_preco_semente
2 - pl_preco_semente
2 - pl_preco_suino
2 - pl_preco_suino
2 - pl_tribut_produ
2 - pl_tribut_produ
2 - pl_valida_const
2 - pl_valida_const
 => nil
2.5.1 :160 > exit
user1@unifaceutility:~/search$ cat lib/leitura_coamo_desenv.yml
---
ambiente:
  diretorio_listener: "/var/coamo/unifacedes/r96_coamo_des/proclisting"
  extensao_leitura: all
  empresa: 1
geral:
  ultimo_diretorio: proclisting/
  ultima_alteracao: 2019 02 21 12 32 48
  nome_arq_result: coamo_desenv
  servidor_http: http://localhost/componentes
  servidor_http_funcao: http://localhost/funcaos
user1@unifaceutility:~/search$ sudo nano config/routes.rb
[sudo] password for user1:
user1@unifaceutility:~/search$ sudo nano app/controllers/componentes_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/funcaos_controller.rb
Use "fg" to return to nano.

[1]+  Stopped                 sudo nano app/controllers/funcaos_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/funcaos_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/funcaos_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/funcaos_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/funcaos_controller.rb
user1@unifaceutility:~/search$ sudo nano app/controllers/componentes_controller.rb
  GNU nano 2.9.3                                                               app/controllers/componentes_controller.rb

      #image[0].write(vNomeArqImg)
      #image[1].write("2#{vNomeArqImg}")
    end
  end

  # POST /componentes
  # POST /componentes.json
  def create
    @componente = Componente.new(componente_params)

    if @componente.save
        render body: nil
    end

  end

  def destroy
    begin
      Componente.where("nome = ? and cd_empresa = ?", "#{params[:id]}", params[:cd_empresa]).each do |reg|
        reg.delete
        Componente.searchkick_index.remove(reg)
      end
    rescue
      nil
    end
  end

  private
  # Never trust parameters from the scary internet, only allow the white list through.
  def componente_params
    params.require(:componentes).permit(:nome, :linha, :cd_empresa, :tipo, :payload =>{})
  end


  #def reindex_componentes
  #  Componente.reindex
  #end


end



^G Get Help      ^O Write Out     ^W Where Is      ^K Cut Text      ^J Justify       ^C Cur Pos       M-U Undo         M-A Mark Text    M-] To Bracket   M-▲ Previous     ^B Back
^X Exit          ^R Read File     ^\ Replace       ^U Uncut Text    ^T To Linter     ^_ Go To Line    M-E Redo         M-6 Copy Text    M-W WhereIs Next M-▼ Next         ^F Forward


		    vNmFuncao     = "#{vCmd[0][(vCmd[0].index(/\s/)+1)..100].to_s}"
		    vNmFuncao     = vNmFuncao.gsub("\n", "")
		    vPostString   = {"funcaos": {
			                "nm_funcao": vNmFuncao.downcase, 
					"cd_componente": vComponente.downcase, 
					"tipo": vTipo, 
					"codigo": vComando,
					"cd_empresa": @cd_empresa
					}
				}
		    vPostString  = vPostString.to_json
		    RestClient.post "#{@servidor_funcao}", JSON.parse(vPostString)
		end
         end


	def processar
		v_dia   		= Time.now.strftime("%d%m%Y")

		File.open(@nm_arquivo, "r").each_line.with_index do |li, v_count|
		    if v_count > 0
			begin
			    v_dia_hora 	= Time.new(li.split[5][4..7], li.split[5][2..3], li.split[5][0..1], li.split[6][0..1], li.split[6][2..3])
			rescue
			    raise "#{li.split[5]}       #{li.split[6]}"
			end
		        if v_dia_hora > @data_ultima_alteracao
#if v_count > 0
		    	   if v_dia == li.split[5]
			       post_arquivo(li.split[7])
			   else
			      break
			   end
# end
                        end
		    end
                end
		@arq_importados.close
	end



	def post_arquivo(vArquivo)
	
		vTipo 			= ""
		if vArquivo.include?(".cptlst")
		     vTipo        = "Componente"
		elsif vArquivo.include?(".menlst")
		     vTipo        = "Menu"
		elsif vArquivo.include?(".apslst")
		    vTipo         = "StartUpShel"
		end
		
		if vTipo.empty?
		   return nil
		end

		vArquivoLer       = "#{@diretorio_listener}/#{vArquivo}"
		
		vId 		  = nome_arquivo(vArquivoLer)

		RestClient.delete "#{@servidor_http}/#{vId}", {params: 
								{
								 nome: vId, 
								 cd_empresa: @cd_empresa
								 }
								}
	
		@arq_importados.write vArquivoLer
		@arq_importados.write "\n"


		vCmdActivate 		= []
		vIndica      		= false
		
		vIndicaFuncao   = false
		vCmdFuncao      = []
	
		f = File.read(vArquivoLer).each_line do |linha|

			if linha[0..0] == '['
				v1  	= linha.index("\n")
				if v1.nil?
					 vLinha = linha[26..300]
				else
					v1 	   -= 1
					vLinha 	= linha[26..v1]
				end
	
				if !vLinha.nil? 
					if (!vLinha.match(/^;/) && vLinha.match(/^entry/i)) or vLinha.match(/^operation/i)
					   vIndicaFuncao = true
					end
					if vIndicaFuncao
					   vLinha2              = vLinha.gsub("\n", "")
					   vLinha2              = vLinha.force_encoding("UTF-8")
					   vCmdFuncao		<< vLinha2
	
					   if (!vLinha.match(/endw/i) && 
					       !vLinha.match(/endf/i) && 
					       !vLinha.match(/endi/i) && 
					       !vLinha.match(/endv/i) && 
					       !vLinha.match(/endp/i) && !vLinha.nil? && !vLinha.match(/^;/)) & (!!(vLinha.match(/^end\s/i)) or !!(vLinha.match(/^end\;/i)) or !!(vLinha.match(/^end/i)))
					       post_funcao(vId, vCmdFuncao)
					       vCmdFuncao		= []
					       vIndicaFuncao 	= false
					   end
					end
				
				
					if vIndica
					   vIndica 		= vLinha.match(/\%\\/) ? true : false
					   vLinha 			= tratar_linha(vLinha)
					   if !vLinha.empty?
					      vCmdActivate << vLinha
					   else
					      vIndica 		= false
					      vCmdActivate = []
					   end
					else
					   if vCmdActivate.any?
					      vComando     = vCmdActivate.map { |i| i.to_s }.join("")
					      vPostString  = {"componentes": {"nome": vId, "linha": vComando, "cd_empresa": @cd_empresa, tipo: vTipo }}
					      vPostString  = vPostString.to_json
					      RestClient.post "#{@servidor_http}", JSON.parse(vPostString)
					 
					      vCmdActivate = []	
					      vIndica 	 = false
					    end
						
					    if !vLinha.nil?
					        if ((vLinha.match(/activate\s.*\".*\"/i) 		or 
					            vLinha.match(/newinsntace\s.*\".*\"\,/i) 	or 
						    vLinha.match(/new_insntace\s.*\".*\"\,/i) 	or
						    vLinha.match(/selectdb\s/i) 				or
						    vLinha.match(/sql.*\".*\,\"def\"/i)))
						    vIndica 	= vLinha.match(/\%\\/) ? true : false
						    if !vIndica 
						  	if (!vLinha[-1, 1].empty? and vLinha[-1, 1] != ")" and vLinha.length >= 248)
						 	    vIndica = true
							end
						    end
						    vLinha 		= tratar_linha(vLinha)
						    if !vLinha.empty?
			 			        vCmdActivate << vLinha
						    else
			   			       vIndica 	= false
						       vCmdActivate = []
						    end
						end
					    end
					end
				end
			end
		end	
		
	end


end
